# Security Camera Blueprint
### Set up the Raspberry Pi Security Camera Script
The scripts located in this folder are meant to be run on the Raspberry Pi operating system to send data (images and notifications) to the Security Camera service running on Functions.

Full instructions for this tutorial can be found in the [Security Camera Blueprint](https://www.twilio.com/wireless/blueprints/security-camera/). Below you will find the minimum steps necessary to get this up and running.

Open a terminal and type the following commands:

```
sudo apt-get update
sudo apt-get install nodejs libopencv-dev
```
The main system packages that Security Camera depends on are **nodejs** and **libopencv-dev**.

1. Create a directory named camera in /home/pi
2. Download the security-camera.js and package.json from this repository into the camera directory
    - An alternative is to download the files to a USB Flash Drive and transfer them to the Pi
3. From the terminalâ€™s command line, type the following command:

```
npm install
```

The main Node.js packages our application depends on are **raspicam**, **opencv**, and **twilio-sync**.

1. Create an **images** directory inside the **camera** directory

```
mkdir /home/pi/camera/images
```

2. Ensure that the path where you added your images folder matches the path on line 14 in the security-camera.js script
3. Change the **clientBootstrapUrl** variable on line 13 to the URL where your CameraAuthenticator function is deployed
4. Change the **cameraId** variable on line 11 to the ID used when adding the camera
5. Change the **cameraSecret** variable on line 12 to the token generated by the server application
6. Run the script by entering the following command in a terminal:
```
cd /home/pi/camera
npm start
```

That's it! As a reminder, full instructions for this tutorial can be found in the [Security Camera Blueprint](https://www.twilio.com/wireless/blueprints/security-camera/).
